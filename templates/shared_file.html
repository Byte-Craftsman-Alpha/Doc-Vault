<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shared file - MewDrive</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo/logo.png') }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.15/dist/tailwind.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
    <style>
      body{min-height:100vh;margin:0;background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);color:#1f2937;font-family:"Public Sans",ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
      .min-h-screen{min-height:100vh}
      .mx-auto{margin-left:auto;margin-right:auto}
      .max-w-2xl{max-width:42rem}
      .p-6{padding:1.5rem}
      .p-5{padding:1.25rem}
      .mt-6{margin-top:1.5rem}
      .mt-5{margin-top:1.25rem}
      .mt-4{margin-top:1rem}
      .mt-1{margin-top:.25rem}
      .pt-2{padding-top:.5rem}
      .flex{display:flex}
      .grid{display:grid}
      .items-start{align-items:flex-start}
      .items-center{align-items:center}
      .justify-between{justify-content:space-between}
      .gap-4{gap:1rem}
      .gap-3{gap:.75rem}
      .gap-2{gap:.5rem}
      .flex-wrap{flex-wrap:wrap}
      .text-xs{font-size:.75rem;line-height:1rem}
      .text-sm{font-size:.875rem;line-height:1.25rem}
      .text-xl{font-size:1.25rem;line-height:1.75rem}
      .font-semibold{font-weight:600}
      .uppercase{text-transform:uppercase}
      .tracking-wider{letter-spacing:.05em}
      .break-words{overflow-wrap:break-word}
      .text-slate-400{color:#94a3b8}
      .text-slate-500{color:#64748b}
      .text-slate-600{color:#475569}
      .text-slate-800{color:#1e293b}
      .text-slate-900{color:#0f172a}
      .bg-slate-100{background:#f1f5f9}
      .hover\:bg-slate-200:hover{background:#e2e8f0}
      .w-10{width:2.5rem}
      .h-10{height:2.5rem}
      .rounded-2xl{border-radius:1rem}
      .object-cover{object-fit:cover}
      @media (min-width:768px){
        .md\:p-10{padding:2.5rem}
      }
      .minimal-card{background:#fff;border:1px solid #e2e8f0;border-radius:16px;box-shadow:0 1px 3px rgba(15,23,42,.04);transition:.2s}
      .minimal-card:hover{box-shadow:0 4px 12px rgba(15,23,42,.08)}
      .minimal-btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;border-radius:12px;padding:.6rem .9rem;font-weight:600;font-size:.875rem;transition:.2s}
      .minimal-btn:focus{outline:none;box-shadow:0 0 0 4px rgba(16,18,22,.12)}
      .minimal-btn-primary{color:#fff;background:#101216}
      .minimal-btn-primary:hover{transform:translateY(-1px);background:#0b0d10;box-shadow:0 8px 22px rgba(15,23,42,.12)}
      .minimal-input{width:100%;border:1px solid #e2e8f0;border-radius:12px;padding:.65rem .85rem;font-size:.875rem;color:#0f172a;background:#fff;transition:.2s}
      .minimal-input:focus{outline:none;border-color:#101216;box-shadow:0 0 0 4px rgba(16,18,22,.12)}
    </style>
  </head>
  <body class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 text-slate-800">
    <div class="max-w-2xl mx-auto p-6 md:p-10">
      <div class="minimal-card p-5">
        <div class="flex items-start justify-between gap-4">
          <div class="flex items-center gap-3">
            <img class="w-10 h-10 rounded-2xl object-cover" src="{{ url_for('static', filename='logo/logo.png') }}" alt="Logo" />
            <div>
              <div class="text-slate-500 text-xs uppercase tracking-wider">Shared file</div>
              <div class="mt-1 text-slate-900 font-semibold text-xl break-words">{{ file.original_filename }}</div>
            </div>
          </div>
        </div>

        <div class="mt-5 grid gap-3">
          <div class="text-sm text-slate-600">
            <div><span class="font-semibold text-slate-900">Type:</span> {{ file.content_type or '-' }}</div>
            <div class="mt-1"><span class="font-semibold text-slate-900">Size:</span>
              {% if file.size_bytes %}{{ (file.size_bytes / 1024) | round(1) }} KB{% else %}-{% endif %}
            </div>
            <div class="mt-1"><span class="font-semibold text-slate-900">Uploaded:</span> {{ file.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</div>
            <div class="mt-1"><span class="font-semibold text-slate-900">Expires:</span> {{ share.expires_at.strftime('%Y-%m-%d %H:%M') }} (UTC)</div>
          </div>

          <div class="pt-2 flex items-center gap-2 flex-wrap">
            <a class="minimal-btn minimal-btn-primary" href="{{ url_for('shared_file_download', token=token) }}">
              <span class="iconify" data-icon="solar:download-bold-duotone"></span>
              <span>Download</span>
            </a>
            <button class="minimal-btn bg-slate-100 hover:bg-slate-200 text-slate-800" type="button" onclick="copyLink()">
              <span class="iconify" data-icon="solar:copy-line-duotone"></span>
              <span>Copy link</span>
            </button>
          </div>

          <div class="mt-4">
            <label class="block text-xs font-semibold uppercase tracking-wider text-slate-600 mb-2">Share link</label>
            <div class="flex items-center gap-2">
              <input class="minimal-input" id="share-url" readonly value="{{ url_for('shared_access', token=token, _external=True) }}" />
              <button class="minimal-btn bg-slate-100 hover:bg-slate-200 text-slate-800" type="button" onclick="copyLink()">Copy</button>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center text-xs text-slate-400 mt-6">Powered by MewDrive</div>
    </div>

    <script>
      async function copyLink(){
        var el = document.getElementById('share-url');
        var txt = el ? el.value : '';
        if(!txt) return;
        try{
          await navigator.clipboard.writeText(txt);
        }catch(e){
          try{
            var ta = document.createElement('textarea');
            ta.value = txt;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            ta.remove();
          }catch(e2){}
        }
      }
    </script>
  </body>
</html>
