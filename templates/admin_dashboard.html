{% extends 'admin_base.html' %}

{% block title %}Admin - MewDrive{% endblock %}

{% block content %}
  <div class="admin-card p-5">
    <div class="flex items-start justify-between gap-4 flex-wrap">
      <div>
        <h1 class="text-2xl font-semibold text-slate-900">Users</h1>
        <p class="text-slate-500 mt-1">Monitor any userâ€™s vault (folders and files).</p>
      </div>
      <div class="text-sm text-slate-500">Signed in as <span class="font-semibold text-slate-900">{{ current_user.username }}</span></div>
    </div>
  </div>

  <div class="admin-card overflow-hidden mt-6">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Username</th>
          <th>Role</th>
          <th>Created</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
          <tr>
            <td class="font-semibold">{{ u.username }}</td>
            <td>
              {% if u.is_admin %}
                <span class="admin-pill bg-slate-900 text-white">Admin</span>
              {% else %}
                <span class="admin-pill bg-slate-100 text-slate-800">User</span>
              {% endif %}
            </td>
            <td class="text-slate-500">{{ u.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td class="text-right">
              <a class="admin-btn admin-btn-soft" href="{{ url_for('admin_user', user_id=u.id) }}">
                <span class="iconify" data-icon="mdi:folder-eye-outline"></span>
                <span>View vault</span>
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
