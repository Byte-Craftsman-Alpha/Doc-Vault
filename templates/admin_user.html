{% extends 'admin_base.html' %}

{% block title %}Admin - {{ user.username }}{% endblock %}

{% block content %}
  <div class="flex items-start justify-between gap-4 flex-wrap">
    <div>
      <a class="text-slate-500 hover:text-slate-900 inline-flex items-center gap-2" href="{{ url_for('admin_dashboard') }}">
        <span class="iconify" data-icon="mdi:arrow-left"></span>
        <span>Back to users</span>
      </a>
      <h1 class="text-2xl font-semibold text-slate-900 mt-2">{{ user.username }}’s vault</h1>
      <p class="text-slate-500 mt-1">Folders: {{ folders|length }} · Files: {{ file_count }} · Size: {{ (total_bytes / (1024*1024)) | round(2) }} MB</p>
    </div>
  </div>

  <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
    {% for folder in folders %}
      <a class="admin-card p-5 block" href="{{ url_for('admin_folder', folder_id=folder.id) }}">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-2xl bg-slate-100 text-slate-900 flex items-center justify-center">
              <span class="iconify" data-icon="mdi:folder-outline"></span>
            </div>
            <div>
              <div class="font-semibold text-slate-900">{{ folder.name }}</div>
              <div class="text-xs text-slate-500">Created {{ folder.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
            </div>
          </div>
          <span class="iconify text-slate-400" data-icon="mdi:chevron-right"></span>
        </div>
      </a>
    {% else %}
      <div class="admin-card p-6 sm:col-span-2 lg:col-span-3">
        <div class="text-slate-900 font-semibold">No folders</div>
        <div class="text-slate-500 mt-1">This user has not created folders yet.</div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
